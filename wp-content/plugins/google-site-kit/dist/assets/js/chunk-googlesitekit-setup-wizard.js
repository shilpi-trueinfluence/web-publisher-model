(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{134:function(e,t,a){"use strict";var n=a(1),i=a.n(n),r=a(2),s=a.n(r),o=a(3),c=a.n(o),l=a(4),u=a.n(l),d=a(9),m=a.n(d),g=a(5),p=a.n(g),h=(a(8),a(19)),f=a(6),k=a.n(f),v=wp.element,_=v.Component,R=v.createRef,y=function(e){function t(e){var a;return i()(this,t),(a=c()(this,u()(t).call(this,e))).formFieldRef=R(),a.checkboxRef=R(),a}return p()(t,e),s()(t,[{key:"componentDidMount",value:function(){new h.e(this.formFieldRef.current).input=new h.c(this.checkboxRef.current)}},{key:"render",value:function(){var e=this.props,t=e.onChange,a=e.id,n=e.name,i=e.value,r=e.checked,s=e.disabled,o=e.children;return React.createElement("div",{className:"mdc-form-field",ref:this.formFieldRef},React.createElement("div",{className:"\n\t\t\t\t\t\tmdc-checkbox\n\t\t\t\t\t\t".concat(s?"mdc-checkbox--disabled":"","\n\t\t\t\t\t"),ref:this.checkboxRef},React.createElement("input",{className:"mdc-checkbox__native-control",type:"checkbox",id:a,name:n,value:i,checked:r,disabled:s,onChange:t}),React.createElement("div",{className:"mdc-checkbox__background"},React.createElement("svg",{className:"mdc-checkbox__checkmark",viewBox:"0 0 24 24"},React.createElement("path",{className:"mdc-checkbox__checkmark-path",fill:"none",d:"M1.73,12.91 8.1,19.28 22.79,4.59"})),React.createElement("div",{className:"mdc-checkbox__mixedmark"}))),React.createElement("label",{htmlFor:a},o))}}]),t}(_);y.propTypes={onChange:k.a.func.isRequired,id:k.a.string.isRequired,name:k.a.string.isRequired,value:k.a.string.isRequired,checked:k.a.bool,disabled:k.a.bool,children:k.a.node.isRequired},y.defaultProps={checked:!1,disabled:!1};var E=y,b=wp.element.Component,w=wp.i18n.__,C=function(e){function t(e){var a;return i()(this,t),(a=c()(this,u()(t).call(this,e))).state={scriptOnPage:!!googlesitekit.admin.trackingOptin,optIn:!!googlesitekit.admin.trackingOptin,error:!1},a.handleOptIn=a.handleOptIn.bind(m()(a)),a}return p()(t,e),s()(t,[{key:"handleOptIn",value:function(e){var t=this,a=e.target.checked,n={googlesitekit_tracking_optin:a};wp.apiFetch({path:"/wp/v2/settings",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify(n),method:"POST"}).then(function(){if(a&&!t.state.scriptOnPage){var e=window.document;if(!e)return;window.googlesitekitTrackingEnabled=!!a,e.body.insertAdjacentHTML("beforeend",'\n\t\t\t\t\t\t<script async src="https://www.googletagmanager.com/gtag/js?id='.concat(googlesitekit.admin.trackingID,'"><\/script>\n\t\t\t\t\t')),e.body.insertAdjacentHTML("beforeend","\n\t\t\t\t\t\t<script>\n\t\t\t\t\t\t\twindow.dataLayer = window.dataLayer || [];\n\t\t\t\t\t\t\tfunction gtag(){dataLayer.push(arguments);}\n\t\t\t\t\t\t\tgtag('js', new Date());\n\t\t\t\t\t\t\tgtag('config', '".concat(googlesitekit.admin.trackingID,"');\n\t\t\t\t\t\t<\/script>\n\t\t\t\t\t"))}t.setState({optIn:!!a,error:!1,scriptOnPage:!0})}).catch(function(a){t.setState({optIn:!e.target.checked,error:{errorCode:a.code,errorMsg:a.message}})})}},{key:"render",value:function(){var e=this.state,t=e.optIn,a=e.error,n=this.props,i=n.id,r=n.name;return React.createElement("div",{className:"googlesitekit-opt-in"},React.createElement(E,{id:i,name:r,value:"1",checked:t,onChange:this.handleOptIn},w("Help us improve the Site Kit plugin by allowing tracking of anonymous usage stats. All data are treated in accordance with ","google-site-kit"),React.createElement("a",{href:"https://policies.google.com/privacy",target:"_blank",rel:"noopener noreferrer"},w("Google Privacy Policy","google-site-kit")),"."),a&&React.createElement("div",{className:"googlesitekit-error-text"},a.errorMsg))}}]),t}(b);C.propTypes={id:k.a.string,name:k.a.string},C.defaultProps={id:"googlesitekit-opt-in",name:"optIn"};t.a=C},15:function(e,t,a){"use strict";var n=a(1),i=a.n(n),r=a(2),s=a.n(r),o=a(3),c=a.n(o),l=a(4),u=a.n(l),d=a(5),m=a.n(d),g=(a(8),a(6)),p=a.n(g),h=a(11),f=function(e){function t(){return i()(this,t),c()(this,u()(t).apply(this,arguments))}return m()(t,e),s()(t,[{key:"render",value:function(){var e=this.props,t=e.title,a=e.ctaLabel,n=e.ctaLink;return React.createElement("header",{className:"googlesitekit-layout__header"},React.createElement("div",{className:"mdc-layout-grid"},React.createElement("div",{className:"mdc-layout-grid__inner"},t&&React.createElement("div",{className:"\n\t\t\t\t\t\t\t\t\tmdc-layout-grid__cell\n\t\t\t\t\t\t\t\t\t".concat(n?"mdc-layout-grid__cell--span-6-desktop":"mdc-layout-grid__cell--span-12-desktop","\n\t\t\t\t\t\t\t\t\tmdc-layout-grid__cell--align-middle\n\t\t\t\t\t\t\t\t\t").concat(n?"":"mdc-layout-grid__cell--span-8-tablet","\n\t\t\t\t\t\t\t\t\tmdc-layout-grid__cell--span-4-phone\n\t\t\t\t\t\t\t\t")},React.createElement("h3",{className:"googlesitekit-subheading-1 googlesitekit-layout__header-title"},t)),n&&React.createElement("div",{className:" mdc-layout-grid__cell mdc-layout-grid__cell--span-6-desktop mdc-layout-grid__cell--span-4-phone mdc-layout-grid__cell--align-middle mdc-layout-grid__cell--align-right-tablet "},React.createElement(h.a,{href:n,external:!0,inherit:!0},a)))))}}]),t}(wp.element.Component);f.propTypes={title:p.a.string,ctaLabel:p.a.string,ctaLink:p.a.string},f.defaultProps={title:"",ctaLabel:"",ctaLink:""};var k=f,v=a(53),_=function(e){function t(){return i()(this,t),c()(this,u()(t).apply(this,arguments))}return m()(t,e),s()(t,[{key:"render",value:function(){var e=this.props,t=e.ctaLabel,a=e.ctaLink,n=e.footerContent;return React.createElement("footer",{className:"googlesitekit-layout__footer"},React.createElement("div",{className:"mdc-layout-grid"},React.createElement("div",{className:"mdc-layout-grid__inner"},React.createElement("div",{className:"mdc-layout-grid__cell mdc-layout-grid__cell--span-12"},a&&t&&React.createElement(v.a,{className:"googlesitekit-data-block__source",name:t,href:a,external:!0}),n))))}}]),t}(wp.element.Component);_.propTypes={ctaLabel:p.a.string,ctaLink:p.a.string};var R=_,y=function(e){function t(){return i()(this,t),c()(this,u()(t).apply(this,arguments))}return m()(t,e),s()(t,[{key:"render",value:function(){var e=this.props,t=e.header,a=e.footer,n=e.children,i=e.title,r=e.headerCtaLabel,s=e.headerCtaLink,o=e.footerCtaLabel,c=e.footerCtaLink,l=e.footerContent,u=e.className,d=e.fill,m=e.relative;return React.createElement("div",{className:"\n\t\t\t\tgooglesitekit-layout\n\t\t\t\t".concat(u&&u,"\n\t\t\t\t").concat(d?"googlesitekit-layout--fill":"","\n\t\t\t\t").concat(m?"googlesitekit-layout--relative":"","\n\t\t\t")},t&&React.createElement(k,{title:i,ctaLabel:r,ctaLink:s}),n,a&&React.createElement(R,{ctaLabel:o,ctaLink:c,footerContent:l}))}}]),t}(wp.element.Component);y.propTypes={header:p.a.bool,footer:p.a.bool,children:p.a.node.isRequired,title:p.a.string,headerCtaLabel:p.a.string,headerCtaLink:p.a.string,footerCtaLabel:p.a.string,footerCtaLink:p.a.string,footerContent:p.a.node,className:p.a.string,fill:p.a.bool,relative:p.a.bool},y.defaultProps={header:!1,footer:!1,title:"",headerCtaLabel:"",headerCtaLink:"",footerCtaLabel:"",footerCtaLink:"",footerContent:null,className:"",fill:!1,relative:!1};t.a=y},193:function(e,t,a){"use strict";a.r(t);var n=a(10),i=a.n(n),r=a(12),s=a.n(r),o=a(1),c=a.n(o),l=a(2),u=a.n(l),d=a(3),m=a.n(d),g=a(4),p=a.n(g),h=a(9),f=a.n(h),k=a(5),v=a.n(k),_=(a(8),a(37)),R=a(25),y=a(15),E=a(7),b=a(0),w=a(6),C=a.n(w),S=a(11),N=a(134),L=a(36),x=wp.i18n.__,M=function(e){function t(){return c()(this,t),m()(this,p()(t).apply(this,arguments))}return v()(t,e),u()(t,[{key:"render",value:function(){var e=this.props,t=e.connectURL,a=e.needReauthenticate,n=e.resetAndRestart;return React.createElement("section",{className:"googlesitekit-wizard-step googlesitekit-wizard-step--two"},React.createElement("div",{className:"mdc-layout-grid"},React.createElement("div",{className:"mdc-layout-grid__inner"},React.createElement("div",{className:" mdc-layout-grid__cell mdc-layout-grid__cell--span-12 "},React.createElement("h2",{className:" googlesitekit-heading-3 googlesitekit-wizard-step__title "},x("Authenticate with Google","google-site-kit")),React.createElement("p",null,x("Please sign into your Google account to begin.","google-site-kit")),a&&React.createElement("p",{className:"googlesitekit-error-text"},x("You did not grant access to one or more of the requested scopes. Please grant all scopes that you are prompted for.","google-site-kit")),React.createElement("p",null,React.createElement(R.a,{onClick:function(){Object(b.v)("plugin_setup","signin_with_google"),document.location=t}},x("Sign in with Google","google-site-kit")),n&&React.createElement(S.a,{className:"googlesitekit-wizard-step__back",onClick:n},x("Back","google-site-kit"))),React.createElement("div",{className:"googlesitekit-wizard-step__action googlesitekit-wizard-step__action--justify"},React.createElement(N.a,null),React.createElement(L.a,null))))))}}]),t}(wp.element.Component);M.propTypes={connectURL:C.a.string.isRequired,resetAndRestart:C.a.func};var A=M,U=a(61),P=a.n(U),O=a(27),z=a(19),D=wp.i18n.__,q=wp.element,T=q.Component,V=q.Fragment,F=function(e){function t(e){var a;c()(this,t);var n=(a=m()(this,p()(t).call(this,e))).props,i=n.isAuthenticated,r=n.shouldSetup;return a.state={loading:i&&r,loadingMsg:D("Getting your verified sites...","google-site-kit"),siteURL:" ",selectedURL:"",errorCode:!1,errorMsg:""},a.onProceed=a.onProceed.bind(f()(a)),a}return v()(t,e),u()(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.isAuthenticated,a=e.shouldSetup;t&&a&&this.requestSitePropertyList()}},{key:"requestSitePropertyList",value:function(){var e=this,t=this.props.setErrorMessage;s()(i.a.mark(function a(){var n,r,s,o,c;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,E.c.get(E.b,"site-verification","verification");case 3:if(n=a.sent,r=n.verified,s=n.identifier,!r){a.next=16;break}return Object(b.v)("verification_setup","verification_check_true"),a.next=10,e.insertSiteVerification(s);case 10:if(!0!==a.sent.verified){a.next=14;break}return e.props.siteVerificationSetup(!0),a.abrupt("return",!0);case 14:a.next=17;break;case 16:Object(b.v)("verification_setup","verification_check_false");case 17:e.setState({loading:!1,siteURL:s}),a.next=26;break;case 20:a.prev=20,a.t0=a.catch(0),o=a.t0.message,Object(b.z)(a.t0.message)&&(c=JSON.parse(a.t0.message),o=c.error.message||a.t0.message),t(o),e.setState({loading:!1,errorCode:a.t0.code,errorMsg:o,siteURL:googlesitekit.admin.siteURL});case 26:case"end":return a.stop()}},a,null,[[0,20]])}))()}},{key:"insertSiteVerification",value:function(){var e=s()(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.c.set(E.b,"site-verification","verification",{siteURL:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"onProceed",value:function(){var e=s()(i.a.mark(function e(){var t,a,n,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.setErrorMessage,a=this.state.siteURL?this.state.siteURL:googlesitekit.admin.siteURL,t(""),this.setState({loading:!0,loadingMsg:D("Verifying...","google-site-kit"),errorCode:!1,errorMsg:""}),e.prev=4,e.next=7,this.insertSiteVerification(a);case 7:!0===e.sent.verified&&(Object(b.v)("verification_setup","verification_insert_tag"),this.props.siteVerificationSetup(!0)),e.next=17;break;case 11:e.prev=11,e.t0=e.catch(4),n=e.t0.message,Object(b.z)(e.t0.message)&&(r=JSON.parse(e.t0.message),n=r.error.message||e.t0.message),t(n),this.setState({loading:!1,errorCode:e.t0.code,errorMsg:n});case 17:case"end":return e.stop()}},e,this,[[4,11]])}));return function(){return e.apply(this,arguments)}}()},{key:"renderForm",value:function(){var e=this.state,t=e.loading,a=e.loadingMsg,n=e.siteURL,i=React.createElement(V,null,a&&React.createElement("p",null,a),React.createElement(O.a,null));return t?i:React.createElement(V,null,React.createElement("div",{className:"googlesitekit-wizard-step__inputs"},React.createElement(z.l,{label:D("Website Address","google-site-kit"),name:"siteProperty",floatingLabelClassName:"mdc-floating-label--float-above",outlined:!0,disabled:!0},React.createElement(z.b,{value:n}))),React.createElement("div",{className:"googlesitekit-wizard-step__action googlesitekit-wizard-step__action--justify"},React.createElement(R.a,{onClick:this.onProceed},D("Continue","google-site-kit")),React.createElement(L.a,null)))}},{key:"render",value:function(){var e=this.props,a=e.isAuthenticated,n=e.shouldSetup,i=this.state.errorMsg;return n?React.createElement(V,null,React.createElement("h2",{className:" googlesitekit-heading-3 googlesitekit-wizard-step__title "},D("Verify URL","google-site-kit")),React.createElement("p",{className:"googlesitekit-wizard-step__text"},D("We will need to verify your URL for Site Kit.","google-site-kit")),i&&0<i.length&&React.createElement("p",{className:"googlesitekit-error-text"},i),a&&this.renderForm()):t.renderSetupDone()}}],[{key:"renderSetupDone",value:function(){return React.createElement(V,null,React.createElement("h2",{className:" googlesitekit-heading-3 googlesitekit-wizard-step__title "},D("Verify URL","google-site-kit")),React.createElement("p",{className:"googlesitekit-wizard-step__text"},D("Congratulations, your site has been verified!","google-site-kit")))}}]),t}(T);F.propTypes={isAuthenticated:C.a.bool.isRequired,shouldSetup:C.a.bool.isRequired,siteVerificationSetup:C.a.func.isRequired,completeSetup:C.a.func,setErrorMessage:C.a.func.isRequired};var j=F,I=function(e){function t(){return c()(this,t),m()(this,p()(t).apply(this,arguments))}return v()(t,e),u()(t,[{key:"render",value:function(){var e=!this.props.isVerified;return React.createElement("section",{className:"googlesitekit-wizard-step googlesitekit-wizard-step--three"},React.createElement("div",{className:"mdc-layout-grid"},React.createElement("div",{className:"mdc-layout-grid__inner"},React.createElement("div",{className:" mdc-layout-grid__cell mdc-layout-grid__cell--span-12 "},React.createElement(j,P()({shouldSetup:e},this.props))))))}}]),t}(wp.element.Component);I.propTypes={siteVerificationSetup:C.a.func.isRequired};var K=I,B=wp.i18n,G=B.__,H=B.sprintf,W=wp.element,J=W.Component,Y=W.Fragment,Q=function(e){function t(e){var a;c()(this,t),a=m()(this,p()(t).call(this,e));var n=googlesitekit.admin.siteURL;return a.state={loading:!0,sites:!1,selectedURL:n,siteURL:n,connected:!1,errorCode:!1,errorMsg:""},a.handleURLSelect=a.handleURLSelect.bind(f()(a)),a.insertPropertyToSearchConsole=a.insertPropertyToSearchConsole.bind(f()(a)),a.submitPropertyEventHandler=a.submitPropertyEventHandler.bind(f()(a)),a}return v()(t,e),u()(t,[{key:"componentDidMount",value:function(){var e=s()(i.a.mark(function e(){var t,a,n,r,s,o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,a=t.isAuthenticated,n=t.shouldSetup,a&&n){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,r=["siteRestrictedUser","siteOwner","siteFullUser"],e.next=7,E.c.get(E.b,"search-console","matched-sites");case 7:if(s=e.sent,!(o=s.exactMatch)||!r.includes(o.permissionLevel)){e.next=13;break}return e.next=12,E.c.set(E.b,"search-console","site",{siteURL:o.siteURL});case 12:return e.abrupt("return",this.props.searchConsoleSetup(o.siteURL));case 13:e.next=17;break;case 15:e.prev=15,e.t0=e.catch(3);case 17:this.requestSearchConsoleSiteList();case 18:case"end":return e.stop()}},e,this,[[3,15]])}));return function(){return e.apply(this,arguments)}}()},{key:"requestSearchConsoleSiteList",value:function(){var e=this;if(!this.state.errorCode){var t=this.props.setErrorMessage;s()(i.a.mark(function a(){var n,r,s,o;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,E.c.get(E.b,"search-console","matched-sites");case 3:if(n=a.sent,r=n.exactMatch,s=n.propertyMatches,!r){a.next=11;break}return a.next=9,e.insertPropertyToSearchConsole(r.siteURL);case 9:return e.props.searchConsoleSetup(r.siteURL),a.abrupt("return");case 11:o="",o=1<s.length?H(G("We found %d existing accounts. We recommend using the account “%s”. Please confirm or change below to use.","google-site-kit"),s.length,s[0].siteURL):G("We found no verified accounts, would you like to verify this URL?","google-site-kit"),t(o),e.setState({loading:!1,sites:s,errorCode:"no_property_matched",errorMsg:o}),a.next=21;break;case 17:a.prev=17,a.t0=a.catch(0),t(a.t0.message),e.setState({loading:!1,errorCode:a.t0.code,errorMsg:a.t0.message});case 21:case"end":return a.stop()}},a,null,[[0,17]])}))()}}},{key:"insertPropertyToSearchConsole",value:function(){var e=s()(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.c.set(E.b,"search-console","site",{siteURL:t});case 2:Object(b.v)("search_console_setup","add_new_sc_property"),this.setState({loading:!1,connected:!0});case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"submitPropertyEventHandler",value:function(){var e=this,t=this.state.selectedURL,a=this.props.setErrorMessage;s()(i.a.mark(function n(){return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.insertPropertyToSearchConsole(t);case 3:a(""),e.props.searchConsoleSetup(t),n.next=11;break;case 7:n.prev=7,n.t0=n.catch(0),a(n.t0.message[0].message),e.setState({loading:!1,errorCode:n.t0.code,errorMsg:n.t0.message[0].message});case 11:case"end":return n.stop()}},n,null,[[0,7]])}))()}},{key:"handleURLSelect",value:function(e,t){this.setState({selectedURL:t.getAttribute("data-value")})}},{key:"matchedForm",value:function(){var e=this.state,t=e.sites,a=e.selectedURL,n=[{label:"",value:"",disabled:!0}];return t?(t.forEach(function(e){n.push({label:e,value:e})}),React.createElement(Y,null,React.createElement("div",{className:"googlesitekit-setup-module__inputs"},React.createElement(z.k,{enhanced:!0,name:"siteProperty",label:G("Choose URL","google-site-kit"),outlined:!0,onEnhancedChange:this.handleURLSelect,options:n,value:a})),React.createElement("div",{className:"googlesitekit-setup-module__action googlesitekit-setup-module__action--justify"},React.createElement(R.a,{onClick:this.submitPropertyEventHandler},G("Continue","google-site-kit")),React.createElement(L.a,null)))):null}},{key:"noSiteForm",value:function(){var e=this.state.siteURL;return React.createElement(Y,null,React.createElement("div",{className:"googlesitekit-setup-module__inputs"},React.createElement(z.l,{label:G("Website Address","google-site-kit"),name:"siteProperty",floatingLabelClassName:"mdc-floating-label--float-above",outlined:!0,disabled:!0},React.createElement(z.b,{value:e}))),React.createElement("div",{className:"googlesitekit-setup-module__action googlesitekit-setup-module__action--justify"},React.createElement(R.a,{onClick:this.submitPropertyEventHandler},G("Continue","google-site-kit")),React.createElement(L.a,null)))}},{key:"renderForm",value:function(){var e=this.state,t=e.loading,a=e.sites;return t?React.createElement(Y,null,React.createElement("p",null,G("We’re locating your Search Console account.","google-site-kit")),React.createElement(O.a,null)):0===a.length?this.noSiteForm():this.matchedForm()}},{key:"render",value:function(){var e=this.props,a=e.isAuthenticated,n=e.shouldSetup,i=this.state,r=i.errorMsg,s=i.connected;return!n||s?t.connected():React.createElement("section",{className:"googlesitekit-setup-module googlesitekit-setup-module--search-console"},React.createElement("h2",{className:" googlesitekit-heading-3 googlesitekit-setup-module__title "},G("Search Console","google-site-kit")),r&&0<r.length&&React.createElement("p",{className:"googlesitekit-error-text"},r),a&&n&&this.renderForm())}}],[{key:"connected",value:function(){return React.createElement("section",{className:"googlesitekit-setup-module googlesitekit-setup-module--search-console"},React.createElement("h2",{className:" googlesitekit-heading-3 googlesitekit-setup-module__title "},G("Search Console","google-site-kit")),React.createElement("p",{className:"googlesitekit-setup-module__text--no-margin"},G("Your Search Console is set up with Site Kit.","google-site-kit")))}}]),t}(J);Q.propTypes={isAuthenticated:C.a.bool.isRequired,shouldSetup:C.a.bool.isRequired,searchConsoleSetup:C.a.func.isRequired,setErrorMessage:C.a.func.isRequired};var X=Q,Z=function(e){function t(){return c()(this,t),m()(this,p()(t).apply(this,arguments))}return v()(t,e),u()(t,[{key:"render",value:function(){var e=this.props,t=e.isVerified,a=e.hasSearchConsoleProperty,n=t&&!a;return React.createElement("section",{className:"googlesitekit-wizard-step googlesitekit-wizard-step--four"},React.createElement("div",{className:"mdc-layout-grid"},React.createElement("div",{className:"mdc-layout-grid__inner"},React.createElement("div",{className:" mdc-layout-grid__cell mdc-layout-grid__cell--span-12 "},n?React.createElement(X,P()({shouldSetup:n},this.props)):X.connected()))))}}]),t}(wp.element.Component);Z.propTypes={searchConsoleSetup:C.a.func.isRequired};var $=Z,ee=wp.i18n.__,te=function(e){function t(e){var a;return c()(this,t),a=m()(this,p()(t).call(this,e)),googlesitekit.setup.hasSearchConsoleProperty?Object(b.v)("plugin_setup","user_verified"):Object(b.v)("plugin_setup","site_verified"),a}return v()(t,e),u()(t,[{key:"render",value:function(){return React.createElement("section",{className:"googlesitekit-wizard-step googlesitekit-wizard-step--five"},React.createElement("div",{className:"mdc-layout-grid"},React.createElement("div",{className:"mdc-layout-grid__inner"},React.createElement("div",{className:" mdc-layout-grid__cell mdc-layout-grid__cell--span-4-phone mdc-layout-grid__cell--span-5-tablet mdc-layout-grid__cell--span-9-desktop "},React.createElement("h2",{className:" googlesitekit-heading-3 googlesitekit-wizard-step__title "},ee("Congratulations!","google-site-kit")),React.createElement("p",null,ee("You successfully completed the Site Kit setup and connected Search Console. Check the dashboard for more services to connect.","google-site-kit")),React.createElement("div",{className:"googlesitekit-wizard-step__action"},React.createElement(R.a,{id:"wizard-step-five-proceed",onClick:this.props.completeSetup},ee("Go to Dashboard","google-site-kit")))),React.createElement("div",{className:" mdc-layout-grid__cell mdc-layout-grid__cell--span-4-phone mdc-layout-grid__cell--span-3-tablet mdc-layout-grid__cell--span-3-desktop "},React.createElement("div",{className:"googlesitekit-rocket"},React.createElement("img",{className:"googlesitekit-rocket__body",alt:"",src:googlesitekit.admin.assetsRoot+"images/rocket-body.png"}),React.createElement("img",{className:"googlesitekit-rocket__clouds",alt:"",src:googlesitekit.admin.assetsRoot+"images/rocket-clouds.png"}),React.createElement("img",{className:"googlesitekit-rocket__dust",alt:"",src:googlesitekit.admin.assetsRoot+"images/rocket-dust.png"}))))))}}]),t}(wp.element.Component);te.propTypes={completeSetup:C.a.func.isRequired};var ae=te,ne=wp.i18n.__,ie={authentication:{title:ne("Authenticate","google-site-kit"),required:!0,isApplicable:function(){return!0},isCompleted:function(e){return e.isSiteKitConnected&&e.isAuthenticated&&!e.needReauthenticate},Component:A},verification:{title:ne("Verify URL","google-site-kit"),required:!0,isApplicable:function(){return!0},isCompleted:function(e){return e.isSiteKitConnected&&e.isAuthenticated&&e.isVerified},Component:K},seachConsoleProperty:{title:ne("Connect Search Console","google-site-kit"),required:!0,isApplicable:function(){return!0},isCompleted:function(e){return e.isSiteKitConnected&&e.isAuthenticated&&e.isVerified&&e.hasSearchConsoleProperty},Component:$},completeSetup:{title:ne("Finish","google-site-kit"),required:!1,isApplicable:function(){return!0},isCompleted:function(e){return e.isSiteKitConnected&&e.isAuthenticated&&e.isVerified&&e.hasSearchConsoleProperty},Component:ae}},re=a(18),se=a(16),oe=a.n(se),ce=function(e){function t(){return c()(this,t),m()(this,p()(t).apply(this,arguments))}return v()(t,e),u()(t,[{key:"render",value:function(){var e=this.props,t=e.currentStep,a=e.step,n=e.title,i=e.status,r=e.warning,s=e.error,o=e.stepKey,c=i;r?c="warning":s&&(c="error");var l=!1;switch(c){case"warning":case"error":l=oe.a.createElement(re.a,{id:"exclamation",height:"12",width:"2"});break;case"completed":l=oe.a.createElement(re.a,{id:"check",height:"12",width:"16"})}return oe.a.createElement("div",{className:"\n\t\t\t\tgooglesitekit-wizard-progress-step\n\t\t\t\tgooglesitekit-wizard-progress-step--".concat(a,"\n\t\t\t\t").concat(t?"googlesitekit-wizard-progress-step--current":"","\n\t\t\t\tgooglesitekit-wizard-progress-step--").concat(o,"\n\t\t\t")},oe.a.createElement("div",{className:"googlesitekit-wizard-progress-step__number-wrapper"},oe.a.createElement("div",{className:"\n\t\t\t\t\t\tgooglesitekit-wizard-progress-step__number\n\t\t\t\t\t\tgooglesitekit-wizard-progress-step__number--".concat(c,"\n\t\t\t\t\t")},oe.a.createElement("span",{className:"\n\t\t\t\t\t\t\tgooglesitekit-wizard-progress-step__number-text\n\t\t\t\t\t\t\tgooglesitekit-wizard-progress-step__number-text--".concat(c,"\n\t\t\t\t\t\t")},a),l&&oe.a.createElement("span",{className:"\n\t\t\t\t\t\t\t\tgooglesitekit-wizard-progress-step__number-icon\n\t\t\t\t\t\t\t\tgooglesitekit-wizard-progress-step__number-icon--".concat(c,"\n\t\t\t\t\t\t\t")},l))),oe.a.createElement("p",{className:"googlesitekit-wizard-progress-step__text"},n))}}]),t}(wp.element.Component);ce.propTypes={currentStep:C.a.bool.isRequired,step:C.a.number.isRequired,title:C.a.string,status:C.a.string,warning:C.a.bool,error:C.a.bool},ce.defaultProps={title:"",status:"",warning:!1,error:!1,removeFirstStep:!1};var le=ce,ue=wp.i18n.__,de=wp.element,me=de.Component,ge=de.Fragment,pe=lodash.delay,he=function(e){function t(e){var a;c()(this,t),a=m()(this,p()(t).call(this,e));var n=googlesitekit.admin.connectURL,i=googlesitekit.setup,r=i.isAuthenticated,s=i.hasSearchConsoleProperty,o=i.isSiteKitConnected,l=i.isVerified,u=i.needReauthenticate,d=googlesitekit.permissions.canSetup;return a.state={canSetup:d,isAuthenticated:r,isVerified:l,needReauthenticate:u,hasSearchConsoleProperty:s,hasSearchConsolePropertyFromTheStart:s,connectURL:n,errorMsg:"",isSiteKitConnected:o,completeSetup:!1},a.siteConnectedSetup=a.siteConnectedSetup.bind(f()(a)),a.siteVerificationSetup=a.siteVerificationSetup.bind(f()(a)),a.searchConsoleSetup=a.searchConsoleSetup.bind(f()(a)),a.resetAndRestart=a.resetAndRestart.bind(f()(a)),a.completeSetup=a.completeSetup.bind(f()(a)),a.setErrorMessage=a.setErrorMessage.bind(f()(a)),a}return v()(t,e),u()(t,[{key:"resetAndRestart",value:function(){var e=s()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.c.set(E.a,"site","reset");case 2:Object(b.d)(),this.setState({isSiteKitConnected:!1,isAuthenticated:!1,isVerified:!1,hasSearchConsoleProperty:!1,completeSetup:!1,errorMsg:""});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"completeSetup",value:function(){this.setState({completeSetup:!0})}},{key:"siteConnectedSetup",value:function(e){this.setState({isSiteKitConnected:e})}},{key:"siteVerificationSetup",value:function(e){this.setState({isVerified:e})}},{key:"searchConsoleSetup",value:function(e){this.setState({hasSearchConsoleProperty:e})}},{key:"isSetupFinished",value:function(){var e=this.state,t=e.isSiteKitConnected,a=e.isAuthenticated,n=e.isVerified,i=e.hasSearchConsoleProperty,r=e.completeSetup;return t&&a&&n&&i&&r}},{key:"setErrorMessage",value:function(e){this.setState({errorMsg:e})}},{key:"getApplicableSteps",value:function(){var e,t=ie,a=Object.keys(t);for(e=0;e<a.length;e++)t[a[e]].isApplicable(this.state)||delete t[a[e]];return t}},{key:"currentStep",value:function(e){var t,a=Object.keys(e);for(t=0;t<a.length-1;t++)if(!e[a[t]].isCompleted(this.state))return a[t];return a[t]}},{key:"stepStatus",value:function(e,t){return e[t].isCompleted(this.state)?"completed":t===this.currentStep(e)?"inprogress":""}},{key:"render",value:function(){var e=this,t=this.state,a=t.canSetup,n=t.isAuthenticated,i=t.isVerified,r=t.needReauthenticate,s=t.hasSearchConsoleProperty,o=t.connectURL,c=t.isSiteKitConnected;if(this.isSetupFinished()){var l=Object(b.n)("googlesitekit-dashboard",{notification:"authentication_success"});pe(function(){window.location.replace(l)},500,"later")}var u=this.getApplicableSteps(),d=this.currentStep(u),m=u[d].Component,g=React.createElement(m,{siteConnectedSetup:this.siteConnectedSetup,connectURL:o,siteVerificationSetup:this.siteVerificationSetup,searchConsoleSetup:this.searchConsoleSetup,completeSetup:this.completeSetup,isSiteKitConnected:c,isAuthenticated:n,isVerified:i,needReauthenticate:r,hasSearchConsoleProperty:s,setErrorMessage:this.setErrorMessage,resetAndRestart:u.clientCredentials?this.resetAndRestart:void 0}),p=a,h=!p&&!n;return React.createElement(ge,null,React.createElement(_.a,null),React.createElement("div",{className:"googlesitekit-wizard"},React.createElement("div",{className:"mdc-layout-grid"},React.createElement("div",{className:"mdc-layout-grid__inner"},React.createElement("div",{className:" mdc-layout-grid__cell mdc-layout-grid__cell--span-12 "},React.createElement(y.a,null,React.createElement("section",{className:"googlesitekit-wizard-progress"},React.createElement("div",{className:"mdc-layout-grid"},React.createElement("div",{className:"mdc-layout-grid__inner"},p&&React.createElement("div",{className:" mdc-layout-grid__cell mdc-layout-grid__cell--span-12 "},React.createElement("div",{className:"googlesitekit-wizard-progress__steps"},Object.keys(u).map(function(t,a){return React.createElement(le,{key:u[t].title,currentStep:d===t,title:u[t].title,step:a+1,status:e.stepStatus(u,t),warning:u[t].warning,error:u[t].error,stepKey:t})}))))),h&&React.createElement("div",{className:"googlesitekit-setup__footer"},React.createElement("div",{className:"mdc-layout-grid"},React.createElement("div",{className:"mdc-layout-grid__inner"},React.createElement("div",{className:" mdc-layout-grid__cell mdc-layout-grid__cell--span-12 "},React.createElement("h1",{className:"googlesitekit-setup__title"},ue("Authenticate Site Kit","google-site-kit")),React.createElement("p",{className:"googlesitekit-setup__description"},ue("Please sign into your Google account to begin.","google-site-kit")),React.createElement(R.a,{href:"#",onClick:function(){Object(b.v)("plugin_setup","signin_with_google"),document.location=o}},ue("Sign in with Google","google-site-kit"))))))),p&&g))))))}}]),t}(me);t.default=he},36:function(e,t,a){"use strict";a(8);var n=a(11);t.a=function(){var e=(0,wp.i18n.__)("Need help?","google-site-kit");return React.createElement(n.a,{className:"googlesitekit-help-link",href:"https://sitekit.withgoogle.com/documentation/",external:!0},e)}},37:function(e,t,a){"use strict";var n=a(1),i=a.n(n),r=a(2),s=a.n(r),o=a(3),c=a.n(o),l=a(4),u=a.n(l),d=a(5),m=a.n(d),g=(a(8),wp.components.withFilters),p=function(e){function t(){return i()(this,t),c()(this,u()(t).apply(this,arguments))}return m()(t,e),s()(t,[{key:"render",value:function(){return null}}]),t}(wp.element.Component),h=g("googlesitekit.ErrorNotification")(p),f=a(71),k=a(10),v=a.n(k),_=a(12),R=a.n(_),y=a(9),E=a.n(y),b=a(60),w=a(25),C=a(19),S=a(6),N=a.n(S),L=wp.element,x=L.Component,M=L.createRef,A=function(e){function t(e){var a;return i()(this,t),(a=c()(this,u()(t).call(this,e))).menuRef=M(),a}return m()(t,e),s()(t,[{key:"componentDidMount",value:function(){var e=this.props.menuOpen;this.menu=new C.f(this.menuRef.current),this.menu.open=e,this.menu.setDefaultFocusState(1)}},{key:"componentDidUpdate",value:function(e){var t=this.props.menuOpen;t!==e.menuOpen&&(this.menu.open=t)}},{key:"render",value:function(){var e=this.props,t=e.menuOpen,a=e.menuItems,n=e.onSelected,i=e.id;return React.createElement("div",{className:"mdc-menu mdc-menu-surface",ref:this.menuRef},React.createElement("ul",{id:i,className:"mdc-list",role:"menu","aria-hidden":!t,"aria-orientation":"vertical",tabIndex:"-1"},a.map(function(e,t){return React.createElement("li",{key:t,className:"mdc-list-item",role:"menuitem",onClick:n.bind(null,t),onKeyDown:n.bind(null,t)},React.createElement("span",{className:"mdc-list-item__text"},e))})))}}]),t}(x);A.propTypes={menuOpen:N.a.bool.isRequired,menuItems:N.a.array.isRequired,id:N.a.string.isRequired};var U=A,P=a(0),O=wp.element,z=O.Component,D=O.Fragment,q=O.createRef,T=wp.i18n.__,V=function(e){function t(e){var a;return i()(this,t),(a=c()(this,u()(t).call(this,e))).state={dialogActive:!1,menuOpen:!1},a.handleMenu=a.handleMenu.bind(E()(a)),a.handleMenuClose=a.handleMenuClose.bind(E()(a)),a.handleMenuItemSelect=a.handleMenuItemSelect.bind(E()(a)),a.handleDialog=a.handleDialog.bind(E()(a)),a.handleDialogClose=a.handleDialogClose.bind(E()(a)),a.handleUnlinkConfirm=a.handleUnlinkConfirm.bind(E()(a)),a.menuButtonRef=q(),a.menuRef=q(),a}return m()(t,e),s()(t,[{key:"componentDidMount",value:function(){window.addEventListener("mouseup",this.handleMenuClose),window.addEventListener("keyup",this.handleMenuClose),window.addEventListener("keyup",this.handleDialogClose)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("mouseup",this.handleMenuClose),window.removeEventListener("keyup",this.handleMenuClose),window.removeEventListener("keyup",this.handleDialogClose)}},{key:"handleMenu",value:function(){var e=this.state.menuOpen;this.setState({menuOpen:!e})}},{key:"handleMenuClose",value:function(e){("keyup"!==e.type||27!==e.keyCode)&&"mouseup"!==e.type||this.menuButtonRef.current.buttonRef.current.contains(e.target)||this.menuRef.current.menuRef.current.contains(e.target)||this.setState({menuOpen:!1})}},{key:"handleMenuItemSelect",value:function(e,t){var a=googlesitekit.admin.proxyPermissionsURL;if("keydown"===t.type&&(13===t.keyCode||32===t.keyCode)||"click"===t.type)switch(e){case 0:this.handleDialog();break;case 1:window.location.assign(a);break;default:this.handleMenu()}}},{key:"handleDialog",value:function(){this.setState(function(e){return{dialogActive:!e.dialogActive,menuOpen:!1}})}},{key:"handleDialogClose",value:function(e){27===e.keyCode&&this.setState({dialogActive:!1,menuOpen:!1})}},{key:"handleUnlinkConfirm",value:function(){var e=R()(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({dialogActive:!1}),Object(P.d)(),document.location=Object(P.n)("googlesitekit-splash",{googlesitekit_context:"revoked"});case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=googlesitekit.admin,t=e.userData,a=t.email,n=void 0===a?"":a,i=t.picture,r=void 0===i?"":i,s=e.proxyPermissionsURL,o=this.state,c=o.dialogActive,l=o.menuOpen;return React.createElement(D,null,React.createElement("div",{className:"googlesitekit-dropdown-menu mdc-menu-surface--anchor"},React.createElement(w.a,{ref:this.menuButtonRef,className:"googlesitekit-header__dropdown mdc-button--dropdown",text:!0,onClick:this.handleMenu,icon:r?React.createElement("i",{className:"mdc-button__icon","aria-hidden":"true"},React.createElement("img",{className:"mdc-button__icon--image",src:r,alt:T("User Avatar","google-site-kit")})):void 0,ariaHaspopup:"menu",ariaExpanded:l,ariaControls:"user-menu"},n),React.createElement(U,{ref:this.menuRef,menuOpen:l,menuItems:[T("Disconnect","google-site-kit")].concat(s?[T("Manage sites...","google-site-kit")]:[]),onSelected:this.handleMenuItemSelect,id:"user-menu"})),React.createElement(b.a,{dialogActive:c,handleConfirm:this.handleUnlinkConfirm,handleDialog:this.handleDialog,title:T("Disconnect","google-site-kit"),subtitle:T("Disconnecting Site Kit by Google will remove your access to all services. After disconnecting, you will need to re-authorize to restore service.","google-site-kit"),confirmButton:T("Disconnect","google-site-kit"),provides:[]}))}}]),t}(z),F=wp.element,j=F.Component,I=F.Fragment,K=function(e){function t(){return i()(this,t),c()(this,u()(t).apply(this,arguments))}return m()(t,e),s()(t,[{key:"render",value:function(){var e=googlesitekit.setup.isAuthenticated;return React.createElement(I,null,React.createElement("header",{className:"googlesitekit-header"},React.createElement("section",{className:"mdc-layout-grid"},React.createElement("div",{className:"mdc-layout-grid__inner"},React.createElement("div",{className:" mdc-layout-grid__cell mdc-layout-grid__cell--align-middle mdc-layout-grid__cell--span-3-phone mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-6-desktop "},React.createElement(f.a,null)),React.createElement("div",{className:" mdc-layout-grid__cell mdc-layout-grid__cell--align-middle mdc-layout-grid__cell--align-right-phone mdc-layout-grid__cell--span-1-phone mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-6-desktop "},e&&React.createElement(V,null))))),React.createElement(h,null))}}]),t}(j);t.a=K},60:function(e,t,a){"use strict";var n=a(1),i=a.n(n),r=a(2),s=a.n(r),o=a(3),c=a.n(o),l=a(4),u=a.n(l),d=a(5),m=a.n(d),g=(a(8),a(6)),p=a.n(g),h=a(25),f=a(11),k=a(19),v=a(135),_=a.n(v),R=wp.element,y=R.Component,E=R.createRef,b=wp.i18n.__,w=function(e){function t(){var e;return i()(this,t),(e=c()(this,u()(t).call(this))).state={attributes:[b("Audience overview","google-site-kit"),b("Top pages","google-site-kit"),b("Top acquisition sources","google-site-kit"),b("AdSense & Analytics metrics for top pages","google-site-kit")]},e.dialogRef=E(),e}return m()(t,e),s()(t,[{key:"componentDidMount",value:function(){new k.d(this.dialogRef.current)}},{key:"render",value:function(){var e=this.props,t=e.dialogActive,a=e.handleDialog,n=e.title,i=e.provides,r=e.handleConfirm,s=e.subtitle,o=e.confirmButton,c=e.dependentModules;return React.createElement("div",{ref:this.dialogRef,className:"mdc-dialog ".concat(t?"mdc-dialog--open":""),role:"alertdialog","aria-modal":"true","aria-labelledby":"remove-module-dialog","aria-describedby":"remove-module-dialog-description","aria-hidden":t?"false":"true",tabIndex:"-1"},React.createElement("div",{className:"mdc-dialog__scrim"}," "),React.createElement(_.a,{active:t},React.createElement("div",null,React.createElement("div",{className:"mdc-dialog__container"},React.createElement("div",{className:"mdc-dialog__surface"},n&&React.createElement("h2",{id:"remove-module-dialog",className:"mdc-dialog__title"},n),s&&React.createElement("p",{className:"mdc-dialog__lead"},s),React.createElement("section",{id:"remove-module-dialog-description",className:"mdc-dialog__content"},React.createElement("ul",{className:"mdc-list mdc-list--underlined mdc-list--non-interactive"},i&&i.map(function(e){return React.createElement("li",{className:"mdc-list-item",key:e},React.createElement("span",{className:"mdc-list-item__text"},e))}))),c&&React.createElement("p",{className:"mdc-dialog__dependecies"},React.createElement("strong",null,b("Note: ","google-site-kit")),c),React.createElement("footer",{className:"mdc-dialog__actions"},React.createElement(h.a,{onClick:r,danger:!0},o||b("Disconnect","google-site-kit")),React.createElement(f.a,{className:"mdc-dialog__cancel-button",onClick:function(){return a()},inherit:!0},b("Cancel","google-site-kit"))))))))}}]),t}(y);w.propTypes={dialogActive:p.a.bool,handleDialog:p.a.func,handleConfirm:p.a.func.isRequired,title:p.a.string,description:p.a.string,confirmButton:p.a.string},w.defaultProps={dialogActive:!1,handleDialog:null,title:null,description:null,confirmButton:null},t.a=w}}]);